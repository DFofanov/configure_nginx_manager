name: Build and Release (Gitea Native)

# Ð­Ñ‚Ð¾Ñ‚ workflow Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½ Ð´Ð»Ñ Gitea
# Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ Ð½Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ðµ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸ Gitea Actions

on:
  push:
    tags:
      - 'v*'
      - 'release-*'
  workflow_dispatch:
    inputs:
      version:
        description: 'Version tag (e.g., v1.0.0)'
        required: false
        default: 'dev'

env:
  APP_NAME: letsencrypt-regru
  PYTHON_VERSION: '3.9'

jobs:
  # ============================================================================
  # Ð¡Ð±Ð¾Ñ€ÐºÐ° Ð´Ð»Ñ Linux
  # ============================================================================
  build-linux:
    name: ðŸ§ Build Linux
    runs-on: ubuntu-latest
    
    steps:
      - name: ðŸ“¥ Checkout repository
        uses: actions/checkout@v3
        with:
          fetch-depth: 0
      
      - name: ðŸ Set up Python ${{ env.PYTHON_VERSION }}
        uses: actions/setup-python@v4
        with:
          python-version: ${{ env.PYTHON_VERSION }}
          cache: 'pip'
      
      - name: ðŸ“¦ Install system dependencies
        run: |
          sudo apt-get update
          sudo apt-get install -y build-essential
      
      - name: ðŸ“š Install Python dependencies
        run: |
          python -m pip install --upgrade pip setuptools wheel
          pip install pyinstaller
          if [ -f requirements.txt ]; then
            pip install -r requirements.txt
          else
            pip install requests certbot cryptography
          fi
      
      - name: â„¹ï¸ Build info
        run: |
          make build-info
      
      - name: ðŸ”¨ Build Linux executable
        run: |
          make build-linux
      
      - name: âœ… Test executable
        run: |
          chmod +x dist/${{ env.APP_NAME }}
          ./dist/${{ env.APP_NAME }} --help
          ./dist/${{ env.APP_NAME }} --create-config /tmp/test_config.json
      
      - name: ðŸ“¦ Create distribution package
        run: |
          make package-linux
      
      - name: ðŸ” Generate checksums
        run: |
          cd dist
          sha256sum ${{ env.APP_NAME }}-linux-x86_64.tar.gz > ${{ env.APP_NAME }}-linux-x86_64.tar.gz.sha256
          md5sum ${{ env.APP_NAME }}-linux-x86_64.tar.gz > ${{ env.APP_NAME }}-linux-x86_64.tar.gz.md5
          cat ${{ env.APP_NAME }}-linux-x86_64.tar.gz.sha256
      
      - name: ðŸ“¤ Upload Linux package
        uses: actions/upload-artifact@v3
        with:
          name: linux-package
          path: |
            dist/${{ env.APP_NAME }}-linux-x86_64.tar.gz
            dist/${{ env.APP_NAME }}-linux-x86_64.tar.gz.sha256
            dist/${{ env.APP_NAME }}-linux-x86_64.tar.gz.md5
          retention-days: 7

  # ============================================================================
  # Ð¡Ð±Ð¾Ñ€ÐºÐ° Ð´Ð»Ñ Windows
  # ============================================================================
  build-windows:
    name: ðŸªŸ Build Windows
    runs-on: windows-latest
    
    steps:
      - name: ðŸ“¥ Checkout repository
        uses: actions/checkout@v3
        with:
          fetch-depth: 0
      
      - name: ðŸ Set up Python ${{ env.PYTHON_VERSION }}
        uses: actions/setup-python@v4
        with:
          python-version: ${{ env.PYTHON_VERSION }}
          cache: 'pip'
      
      - name: ðŸ“š Install Python dependencies
        run: |
          python -m pip install --upgrade pip setuptools wheel
          pip install pyinstaller
          if (Test-Path requirements.txt) {
            pip install -r requirements.txt
          } else {
            pip install requests certbot cryptography
          }
      
      - name: ðŸ”¨ Build Windows executable
        run: |
          make build-windows
      
      - name: âœ… Test executable
        run: |
          dist\${{ env.APP_NAME }}.exe --help
          dist\${{ env.APP_NAME }}.exe --create-config test_config.json
      
      - name: ðŸ“¦ Create distribution package
        run: |
          make package-windows
      
      - name: ðŸ” Generate checksums
        run: |
          cd dist
          certutil -hashfile ${{ env.APP_NAME }}-windows-x86_64.zip SHA256 > ${{ env.APP_NAME }}-windows-x86_64.zip.sha256
          certutil -hashfile ${{ env.APP_NAME }}-windows-x86_64.zip MD5 > ${{ env.APP_NAME }}-windows-x86_64.zip.md5
          type ${{ env.APP_NAME }}-windows-x86_64.zip.sha256
      
      - name: ðŸ“¤ Upload Windows package
        uses: actions/upload-artifact@v3
        with:
          name: windows-package
          path: |
            dist/${{ env.APP_NAME }}-windows-x86_64.zip
            dist/${{ env.APP_NAME }}-windows-x86_64.zip.sha256
            dist/${{ env.APP_NAME }}-windows-x86_64.zip.md5
          retention-days: 7

  # ============================================================================
  # Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ñ€ÐµÐ»Ð¸Ð·Ð° Ð² Gitea
  # ============================================================================
  create-release:
    name: ðŸ“¦ Create Release
    needs: [build-linux, build-windows]
    runs-on: ubuntu-latest
    if: startsWith(github.ref, 'refs/tags/')
    
    steps:
      - name: ðŸ“¥ Checkout repository
        uses: actions/checkout@v3
      
      - name: ðŸ“¥ Download Linux artifacts
        uses: actions/download-artifact@v3
        with:
          name: linux-package
          path: ./release
      
      - name: ðŸ“¥ Download Windows artifacts
        uses: actions/download-artifact@v3
        with:
          name: windows-package
          path: ./release
      
      - name: ðŸ“‹ List release files
        run: |
          echo "Release files:"
          ls -lh ./release/
      
      - name: ðŸ·ï¸ Get version info
        id: version
        run: |
          if [ "${{ github.event_name }}" = "workflow_dispatch" ]; then
            VERSION="${{ github.event.inputs.version }}"
          else
            VERSION="${GITHUB_REF#refs/tags/}"
          fi
          echo "VERSION=$VERSION" >> $GITHUB_OUTPUT
          echo "Release version: $VERSION"
      
      - name: ðŸ“ Generate release notes
        id: release_notes
        run: |
          cat > release_notes.md << 'EOF'
          ## ðŸŽ‰ Let's Encrypt RegRu Manager ${{ steps.version.outputs.VERSION }}
          
          ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð°Ð¼Ð¸ Let's Encrypt Ð´Ð»Ñ Ð´Ð¾Ð¼ÐµÐ½Ð¾Ð² Ð½Ð° reg.ru Ñ Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸ÐµÐ¹ Ð² Nginx Proxy Manager.
          
          ### ðŸ“¦ Ð¤Ð°Ð¹Ð»Ñ‹ Ñ€ÐµÐ»Ð¸Ð·Ð°
          
          #### Linux (Ubuntu 20.04+, Debian 10+, CentOS 8+)
          - **letsencrypt-regru-linux-x86_64.tar.gz** - Ð˜ÑÐ¿Ð¾Ð»Ð½ÑÐµÐ¼Ñ‹Ð¹ Ñ„Ð°Ð¹Ð» (ELF 64-bit)
          - **letsencrypt-regru-linux-x86_64.tar.gz.sha256** - SHA256 ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÑŒÐ½Ð°Ñ ÑÑƒÐ¼Ð¼Ð°
          - **letsencrypt-regru-linux-x86_64.tar.gz.md5** - MD5 ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÑŒÐ½Ð°Ñ ÑÑƒÐ¼Ð¼Ð°
          
          #### Windows (10/11, Server 2019+)
          - **letsencrypt-regru-windows-x86_64.zip** - Ð˜ÑÐ¿Ð¾Ð»Ð½ÑÐµÐ¼Ñ‹Ð¹ Ñ„Ð°Ð¹Ð» (PE32+)
          - **letsencrypt-regru-windows-x86_64.zip.sha256** - SHA256 ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÑŒÐ½Ð°Ñ ÑÑƒÐ¼Ð¼Ð°
          - **letsencrypt-regru-windows-x86_64.zip.md5** - MD5 ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÑŒÐ½Ð°Ñ ÑÑƒÐ¼Ð¼Ð°
          
          ---
          
          ### ðŸš€ Ð‘Ñ‹ÑÑ‚Ñ€Ð°Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°
          
          #### Linux (Ð¾Ð´Ð½Ð° ÐºÐ¾Ð¼Ð°Ð½Ð´Ð°):
          ```bash
          curl -fsSL https://your-gitea.com/api/v1/repos/${{ github.repository }}/releases/tags/${{ steps.version.outputs.VERSION }} | \
            jq -r '.assets[] | select(.name | contains("linux")) | .browser_download_url' | \
            xargs wget -O letsencrypt-regru.tar.gz && \
            tar -xzf letsencrypt-regru.tar.gz && \
            sudo mv letsencrypt-regru /usr/local/bin/ && \
            sudo chmod +x /usr/local/bin/letsencrypt-regru
          ```
          
          #### Ð˜Ð»Ð¸ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ:
          ```bash
          # 1. Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ
          wget https://your-gitea.com/${{ github.repository }}/releases/download/${{ steps.version.outputs.VERSION }}/letsencrypt-regru-linux-x86_64.tar.gz
          
          # 2. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÑŒÐ½ÑƒÑŽ ÑÑƒÐ¼Ð¼Ñƒ
          wget https://your-gitea.com/${{ github.repository }}/releases/download/${{ steps.version.outputs.VERSION }}/letsencrypt-regru-linux-x86_64.tar.gz.sha256
          sha256sum -c letsencrypt-regru-linux-x86_64.tar.gz.sha256
          
          # 3. Ð Ð°ÑÐ¿Ð°ÐºÐ¾Ð²Ð°Ñ‚ÑŒ Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ
          tar -xzf letsencrypt-regru-linux-x86_64.tar.gz
          sudo mv letsencrypt-regru /usr/local/bin/
          sudo chmod +x /usr/local/bin/letsencrypt-regru
          
          # 4. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ
          letsencrypt-regru --help
          ```
          
          #### Windows:
          ```powershell
          # Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ Ð¸ Ñ€Ð°ÑÐ¿Ð°ÐºÐ¾Ð²Ð°Ñ‚ÑŒ
          Invoke-WebRequest -Uri "https://your-gitea.com/${{ github.repository }}/releases/download/${{ steps.version.outputs.VERSION }}/letsencrypt-regru-windows-x86_64.zip" -OutFile "letsencrypt-regru.zip"
          Expand-Archive -Path letsencrypt-regru.zip -DestinationPath "C:\Program Files\LetsEncrypt-RegRu"
          
          # ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ
          & "C:\Program Files\LetsEncrypt-RegRu\letsencrypt-regru.exe" --help
          ```
          
          ---
          
          ### âœ¨ ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸
          
          - âœ… ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Let's Encrypt ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ð²
          - âœ… DNS-Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ñ‡ÐµÑ€ÐµÐ· API reg.ru
          - âœ… ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° wildcard ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ð² (*.domain.com)
          - âœ… ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð² Nginx Proxy Manager
          - âœ… ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ð²
          - âœ… Systemd Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ð´Ð»Ñ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð°Ñ†Ð¸Ð¸
          - âœ… ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½Ð¾Ðµ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ
          - âœ… Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ñ… ÑÐ°Ð¼Ð¾Ð¿Ð¾Ð´Ð¿Ð¸ÑÐ°Ð½Ð½Ñ‹Ñ… ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ð²
          
          ---
          
          ### ðŸ“‹ Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ðµ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ
          
          #### Linux:
          - Ubuntu 20.04+ / Debian 10+ / CentOS 8+ / RHEL 8+
          - certbot (ÑƒÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÑ‚ÑÑ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ñ‡ÐµÑ€ÐµÐ· `letsencrypt_regru.sh`)
          - 50 MB ÑÐ²Ð¾Ð±Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ð¼ÐµÑÑ‚Ð°
          - ÐŸÑ€Ð°Ð²Ð° root (sudo)
          
          #### Windows:
          - Windows 10/11 Ð¸Ð»Ð¸ Server 2019+
          - **Ð’Ð°Ð¶Ð½Ð¾:** certbot Ð½Ðµ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ÑÑ Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ Ð½Ð° Windows
          - Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ WSL (Windows Subsystem for Linux)
          
          ---
          
          ### ðŸ“– Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ
          
          - **[README.md](README.md)** - ÐŸÐ¾Ð»Ð½Ð¾Ðµ Ñ€ÑƒÐºÐ¾Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
          - **[BUILD_GUIDE.md](BUILD_GUIDE.md)** - Ð ÑƒÐºÐ¾Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾ Ð¿Ð¾ ÑÐ±Ð¾Ñ€ÐºÐµ Ð¸Ð· Ð¸ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¾Ð²
          - **[INSTALL_GUIDE.md](docs/INSTALL_GUIDE.md)** - Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ð°Ñ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ñ Ð¿Ð¾ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐµ
          - **[MAKEFILE_COMMANDS.md](MAKEFILE_COMMANDS.md)** - Ð¡Ð¿Ñ€Ð°Ð²ÐºÐ° Ð¿Ð¾ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð°Ð¼ Makefile
          
          ---
          
          ### âš ï¸ Ð’Ð°Ð¶Ð½Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ
          
          1. **Certbot Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÑŒ:**
             - Ð˜ÑÐ¿Ð¾Ð»Ð½ÑÐµÐ¼Ñ‹Ð¹ Ñ„Ð°Ð¹Ð» ÐÐ• Ð²ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ certbot
             - certbot Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½ Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ
             - Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ñ‡ÐµÑ€ÐµÐ· subprocess
          
          2. **Ð Ð°Ð·Ð¼ÐµÑ€ Ñ„Ð°Ð¹Ð»Ð°:**
             - Linux: ~45-55 MB (Ð²ÐºÐ»ÑŽÑ‡Ð°Ñ Python runtime)
             - Windows: ~40-50 MB (Ð²ÐºÐ»ÑŽÑ‡Ð°Ñ Python runtime)
          
          3. **ÐŸÐµÑ€Ð²Ñ‹Ð¹ Ð·Ð°Ð¿ÑƒÑÐº:**
             - ÐœÐ¾Ð¶ÐµÑ‚ Ð·Ð°Ð½ÑÑ‚ÑŒ 5-10 ÑÐµÐºÑƒÐ½Ð´ (Ñ€Ð°ÑÐ¿Ð°ÐºÐ¾Ð²ÐºÐ°)
             - ÐŸÐ¾ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ¸ Ð±Ñ‹ÑÑ‚Ñ€ÐµÐµ (~1-2 ÑÐµÐº)
          
          4. **Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ:**
             - Ð¤Ð°Ð¹Ð»Ñ‹ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐ°Ð½Ñ‹ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÑŒÐ½Ñ‹Ð¼Ð¸ ÑÑƒÐ¼Ð¼Ð°Ð¼Ð¸ SHA256 Ð¸ MD5
             - Ð’ÑÐµÐ³Ð´Ð° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐ¹Ñ‚Ðµ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÑŒÐ½Ñ‹Ðµ ÑÑƒÐ¼Ð¼Ñ‹ Ð¿ÐµÑ€ÐµÐ´ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼
          
          ---
          
          ### ðŸ” ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÑŒÐ½Ñ‹Ñ… ÑÑƒÐ¼Ð¼
          
          #### Linux:
          ```bash
          # SHA256
          sha256sum -c letsencrypt-regru-linux-x86_64.tar.gz.sha256
          
          # MD5
          md5sum -c letsencrypt-regru-linux-x86_64.tar.gz.md5
          ```
          
          #### Windows:
          ```powershell
          # SHA256
          certutil -hashfile letsencrypt-regru-windows-x86_64.zip SHA256
          
          # MD5
          certutil -hashfile letsencrypt-regru-windows-x86_64.zip MD5
          ```
          
          ---
          
          ### ðŸ› ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ð¸ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°
          
          Ð•ÑÐ»Ð¸ Ñƒ Ð²Ð°Ñ Ð²Ð¾Ð·Ð½Ð¸ÐºÐ»Ð¸ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹:
          
          1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ [Issues](../../issues)
          2. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð½Ð¾Ð²Ñ‹Ð¹ [Issue](../../issues/new)
          3. Ð¡Ð¼. Ñ€Ð°Ð·Ð´ÐµÐ» [Troubleshooting](BUILD_GUIDE.md#troubleshooting) Ð² BUILD_GUIDE.md
          
          ---
          
          ### ðŸ“ Changelog
          
          Ð¡Ð¼. [ÐºÐ¾Ð¼Ð¼Ð¸Ñ‚Ñ‹](${{ github.server_url }}/${{ github.repository }}/commits/${{ steps.version.outputs.VERSION }}) Ð´Ð»Ñ Ð´ÐµÑ‚Ð°Ð»ÐµÐ¹ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹.
          
          ---
          
          **ÐÐ²Ñ‚Ð¾Ñ€:** Ð¤Ð¾Ñ„Ð°Ð½Ð¾Ð² Ð”Ð¼Ð¸Ñ‚Ñ€Ð¸Ð¹  
          **Ð”Ð°Ñ‚Ð° Ñ€ÐµÐ»Ð¸Ð·Ð°:** $(date -u +"%Y-%m-%d %H:%M:%S UTC")  
          **Ð’ÐµÑ€ÑÐ¸Ñ:** ${{ steps.version.outputs.VERSION }}
          EOF
          
          cat release_notes.md
      
      - name: ðŸš€ Create Gitea Release
        uses: actions/gitea-release@v1
        env:
          GITEA_TOKEN: ${{ secrets.GITEA_TOKEN || secrets.GITHUB_TOKEN }}
        with:
          files: |
            release/*
          tag_name: ${{ steps.version.outputs.VERSION }}
          name: "Let's Encrypt RegRu Manager ${{ steps.version.outputs.VERSION }}"
          body_path: release_notes.md
          draft: false
          prerelease: false

  # ============================================================================
  # Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ Ð¾ Ñ€ÐµÐ»Ð¸Ð·Ðµ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)
  # ============================================================================
  notify:
    name: ðŸ“¢ Notify
    needs: [create-release]
    runs-on: ubuntu-latest
    if: startsWith(github.ref, 'refs/tags/')
    
    steps:
      - name: ðŸ“§ Send notification
        run: |
          echo "Release created successfully!"
          echo "Tag: ${{ github.ref_name }}"
          echo "Repository: ${{ github.repository }}"
          # Ð—Ð´ÐµÑÑŒ Ð¼Ð¾Ð¶Ð½Ð¾ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÑƒ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹ Ñ‡ÐµÑ€ÐµÐ· webhook, email Ð¸ Ñ‚.Ð´.
