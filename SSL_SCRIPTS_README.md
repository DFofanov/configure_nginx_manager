# –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ Let's Encrypt –¥–ª—è reg.ru

–ù–∞–±–æ—Ä —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ Let's Encrypt —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º DNS-–≤–∞–ª–∏–¥–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ API reg.ru.

## üìÅ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–æ–µ–∫—Ç–∞

- **letsencrypt_regru_dns.sh** - Bash —Å–∫—Ä–∏–ø—Ç (Linux) —Å certbot-dns-regru
- **letsencrypt_regru_api.py** - Python —Å–∫—Ä–∏–ø—Ç —Å –ø—Ä—è–º—ã–º API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
- **letsencrypt_regru.ps1** - PowerShell —Å–∫—Ä–∏–ø—Ç (Windows)
- **config.json.example** - –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **USAGE.md** - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### Linux (Bash)

```bash
# 1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ —Å–∫—Ä–∏–ø—Ç–µ
nano letsencrypt_regru_dns.sh

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∞
chmod +x letsencrypt_regru_dns.sh

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ
sudo ./letsencrypt_regru_dns.sh
```

### Linux (Python)

```bash
# 1. –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo python3 letsencrypt_regru_api.py --create-config /etc/letsencrypt/regru_config.json

# 2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo nano /etc/letsencrypt/regru_config.json

# 3. –ü–æ–ª—É—á–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
sudo python3 letsencrypt_regru_api.py -c /etc/letsencrypt/regru_config.json --obtain
```

### Windows (PowerShell)

```powershell
# 1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ config.json –Ω–∞ –æ—Å–Ω–æ–≤–µ config.json.example

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç
.\letsencrypt_regru.ps1 -ConfigFile .\config.json
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `config.json`:

```json
{
    "regru_username": "–≤–∞—à_–ª–æ–≥–∏–Ω",
    "regru_password": "–≤–∞—à_–ø–∞—Ä–æ–ª—å",
    "domain": "dfv24.com",
    "wildcard": true,
    "email": "admin@dfv24.com"
}
```

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### Linux
- certbot
- Python 3.6+
- pip3
- requests, cryptography (Python –º–æ–¥—É–ª–∏)
- certbot-dns-regru (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### Windows
- certbot
- PowerShell 5.1+
- openssl (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤)

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

### –ß–µ—Ä–µ–∑ cron (Linux)

```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ crontab
sudo crontab -e

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 3:00
0 3 * * * /usr/bin/python3 /path/to/letsencrypt_regru_api.py -c /etc/letsencrypt/regru_config.json
```

### –ß–µ—Ä–µ–∑ Task Scheduler (Windows)

1. –û—Ç–∫—Ä–æ–π—Ç–µ Task Scheduler
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É
3. –¢—Ä–∏–≥–≥–µ—Ä: –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 3:00
4. –î–µ–π—Å—Ç–≤–∏–µ: –ó–∞–ø—É—Å–∫ PowerShell —Å–∫—Ä–∏–ø—Ç–∞

## üìñ –§—É–Ω–∫—Ü–∏–∏

‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ (*.domain.com)  
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è DNS-–≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ API reg.ru  
‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞  
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –∏—Å—Ç–µ—á–µ–Ω–∏–µ–º  
‚úÖ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è  
‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π  

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å Nginx Proxy Manager

–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞:

1. –í–æ–π–¥–∏—Ç–µ –≤ NPM: http://192.168.10.14:81/
2. SSL Certificates ‚Üí Add SSL Certificate ‚Üí Custom
3. –í—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:
   - Certificate Key: `/etc/letsencrypt/live/domain.com/privkey.pem`
   - Certificate: `/etc/letsencrypt/live/domain.com/fullchain.pem`

## üìù –õ–æ–≥–∏

- Bash: `/var/log/letsencrypt_regru.log`
- Python: `/var/log/letsencrypt_regru.log`
- PowerShell: `.\letsencrypt_regru.log`
- Certbot: `/var/log/letsencrypt/letsencrypt.log`

## üÜò –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ API
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ reg.ru
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ–º–µ–Ω –ø–æ–¥ –≤–∞—à–∏–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º

### DNS –∑–∞–ø–∏—Å—å –Ω–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è
- –£–≤–µ–ª–∏—á—å—Ç–µ `dns_propagation_wait` –¥–æ 120 —Å–µ–∫—É–Ω–¥
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS: `nslookup -type=TXT _acme-challenge.domain.com`

### Certbot –Ω–µ –Ω–∞–π–¥–µ–Ω
```bash
# Ubuntu/Debian
sudo apt-get install certbot

# –ò–ª–∏ —á–µ—Ä–µ–∑ snap
sudo snap install --classic certbot
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ —Ñ–∞–π–ª–µ [USAGE.md](USAGE.md)

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –•—Ä–∞–Ω–∏—Ç–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `chmod 600` –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –ø–∞—Ä–æ–ª–∏

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- Let's Encrypt —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã 90 –¥–Ω–µ–π
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- –î–ª—è wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ —Ç—Ä–µ–±—É–µ—Ç—Å—è DNS-–≤–∞–ª–∏–¥–∞—Ü–∏—è

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è reg.ru API](https://www.reg.ru/support/api)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Let's Encrypt](https://letsencrypt.org/docs/)
- [Certbot Documentation](https://certbot.eff.org/docs/)

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–°–∫—Ä–∏–ø—Ç—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è "–∫–∞–∫ –µ—Å—Ç—å" –¥–ª—è —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

---

**–£—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏! üîí**
