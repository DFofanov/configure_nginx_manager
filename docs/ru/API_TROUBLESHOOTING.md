# üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å API reg.ru

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: "Access to API from this IP denied"

–≠—Ç–∞ –æ—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –∫–æ–≥–¥–∞ API reg.ru –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –¥–ª—è –≤–∞—à–µ–≥–æ IP –∞–¥—Ä–µ—Å–∞ –∏–∑ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

### üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–°–Ω–∞—á–∞–ª–∞ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –≤–∞—à —Ç–µ–∫—É—â–∏–π IP –∞–¥—Ä–µ—Å:

```bash
# –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é —Å–∫—Ä–∏–ø—Ç–∞
sudo letsencrypt-regru --test-api

# –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ curl
curl -s https://ipinfo.io/ip

# –°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ –≤–µ–±-—Å–∞–π—Ç
# –û—Ç–∫—Ä–æ–π—Ç–µ https://whatismyipaddress.com/
```

### ‚úÖ –†–µ—à–µ–Ω–∏–µ

#### –ú–µ—Ç–æ–¥ 1: –î–æ–±–∞–≤–∏—Ç—å IP –≤ –±–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–í–æ–π–¥–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç reg.ru**
   - –û—Ç–∫—Ä–æ–π—Ç–µ https://www.reg.ru/
   - –í–æ–π–¥–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç

2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API**
   - –ú–µ–Ω—é ‚Üí "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"
   - –†–∞–∑–¥–µ–ª "–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å"
   - –ü–æ–¥—Ä–∞–∑–¥–µ–ª "API"

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ—Å—Ç—É–ø –ø–æ IP**
   - –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª "–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ IP"
   - –ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å IP –∞–¥—Ä–µ—Å"
   - –í–≤–µ–¥–∏—Ç–µ –≤–∞—à —Ç–µ–∫—É—â–∏–π IP –∞–¥—Ä–µ—Å
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**
   ```bash
   sudo letsencrypt-regru --test-api
   ```

#### –ú–µ—Ç–æ–¥ 2: –û—Ç–∫–ª—é—á–∏—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ IP (–º–µ–Ω–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ)

‚ö†Ô∏è **–í–ù–ò–ú–ê–ù–ò–ï**: –≠—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤–∞—à–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞!

1. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö API reg.ru –Ω–∞–π–¥–∏—Ç–µ "–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ IP"
2. –û—Ç–∫–ª—é—á–∏—Ç–µ –æ–ø—Ü–∏—é "–†–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ —Å —É–∫–∞–∑–∞–Ω–Ω—ã—Ö IP"
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### üîí –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π IP**
   - –ï—Å–ª–∏ —É –≤–∞—Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π IP, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–∫—É–ø–∫—É —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ
   - –ò–ª–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö IP

2. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ API**
   - –î–æ–±–∞–≤–ª—è–π—Ç–µ —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ IP –∞–¥—Ä–µ—Å–∞
   - –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∏ –æ—á–∏—â–∞–π—Ç–µ —Å–ø–∏—Å–æ–∫

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏**
   - –°–ª–æ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å –¥–ª—è –∞–∫–∫–∞—É–Ω—Ç–∞ reg.ru
   - –î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: "Invalid username or password"

### ‚úÖ –†–µ—à–µ–Ω–∏–µ

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**
   ```bash
   sudo nano /etc/letsencrypt-regru/config.json
   ```
   
   –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É–∫–∞–∑–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ:
   - `regru_username` - –ª–æ–≥–∏–Ω –æ—Ç reg.ru
   - `regru_password` - –ø–∞—Ä–æ–ª—å –æ—Ç reg.ru

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª**
   ```bash
   sudo chmod 600 /etc/letsencrypt-regru/config.json
   sudo chown root:root /etc/letsencrypt-regru/config.json
   ```

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**
   ```bash
   sudo letsencrypt-regru --test-api
   ```

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: "IP exceeded allowed connection rate"

### –ü—Ä–∏—á–∏–Ω–∞
API reg.ru –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —á–∞—Å—Ç–æ—Ç—É –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –æ–¥–Ω–æ–≥–æ IP (–æ–±—ã—á–Ω–æ 10-20 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É).

### ‚úÖ –†–µ—à–µ–Ω–∏–µ

1. **–ü–æ–¥–æ–∂–¥–∏—Ç–µ 5-10 –º–∏–Ω—É—Ç**
   ```bash
   # –ü–æ–¥–æ–∂–¥–∏—Ç–µ –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–µ–π –ø–æ–ø—ã—Ç–∫–æ–π
   sleep 600  # 10 –º–∏–Ω—É—Ç
   sudo letsencrypt-regru --obtain
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é –ø—Ä–∞–≤–∏–ª—å–Ω–æ**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ 1 —Ä–∞–∑ –≤ –¥–µ–Ω—å
   sudo systemctl enable letsencrypt-regru.timer
   sudo systemctl start letsencrypt-regru.timer
   
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
   sudo systemctl cat letsencrypt-regru.timer
   ```

3. **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —á–∞—Å—Ç–æ—Ç–µ –∑–∞–ø—Ä–æ—Å–æ–≤**
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: **1 —Ä–∞–∑ –≤ –¥–µ–Ω—å**
   - ‚úÖ –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: **–Ω–µ —á–∞—â–µ 1 —Ä–∞–∑–∞ –≤ —á–∞—Å**
   - ‚ùå –ò–∑–±–µ–≥–∞–π—Ç–µ —á–∞—Å—Ç—ã—Ö —Ç–µ—Å—Ç–æ–≤ `--test-api`
   - ‚ùå –ù–µ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ cron —Å —á–∞—Å—Ç—ã–º –∑–∞–ø—É—Å–∫–æ–º

4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ --check –≤–º–µ—Å—Ç–æ --obtain**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
   sudo letsencrypt-regru --check
   ```

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –¢–∞–π–º–∞—É—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### ‚úÖ –†–µ—à–µ–Ω–∏–µ

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ**
   ```bash
   ping -c 4 api.reg.ru
   curl -I https://api.reg.ru/api/regru2
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä**
   ```bash
   # –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç–µ firewall –¥–ª—è —Ç–µ—Å—Ç–∞
   sudo ufw status
   sudo iptables -L
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ–∫—Å–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è `HTTP_PROXY`, `HTTPS_PROXY` –Ω–µ –º–µ—à–∞—é—Ç

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

–í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ API –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º:

```bash
# –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç API
sudo letsencrypt-regru --test-api

# –¢–µ—Å—Ç —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
sudo letsencrypt-regru --test-api -v

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo letsencrypt-regru --check
```

## üìû –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–º–æ—â–∏

### –¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞ reg.ru

- **Email**: support@reg.ru
- **–¢–µ–ª–µ—Ñ–æ–Ω**: 8 (495) 580-11-11
- **–û–Ω–ª–∞–π–Ω —á–∞—Ç**: –Ω–∞ —Å–∞–π—Ç–µ reg.ru

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **API reg.ru**: https://www.reg.ru/support/api
- **–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**: https://www.reg.ru/support/api/examples
- **FAQ –ø–æ API**: https://www.reg.ru/support/api/faq

### –õ–æ–≥–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

–í—Å–µ–≥–¥–∞ –≤–∫–ª—é—á–∞–π—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É:

```bash
# –í–∫–ª—é—á–∏—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏
sudo letsencrypt-regru --test-api -v

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏
sudo tail -n 50 /var/log/letsencrypt-regru/letsencrypt_regru.log

# –õ–æ–≥–∏ certbot
sudo tail -n 50 /var/log/letsencrypt/letsencrypt.log
```

## üîÑ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ DNS –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å reg.ru API –∫—Ä–∏—Ç–∏—á–Ω—ã, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:

1. **Cloudflare** - –æ—Ç–ª–∏—á–Ω—ã–π API, –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π DNS
2. **Route53** (AWS) - –º–æ—â–Ω—ã–π, –Ω–æ –ø–ª–∞—Ç–Ω—ã–π
3. **DigitalOcean DNS** - –ø—Ä–æ—Å—Ç–æ–π –∏ –Ω–∞–¥–µ–∂–Ω—ã–π
4. **Google Cloud DNS** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å GCP

–î–ª—è –Ω–∏—Ö –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–∞ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥—Ä—É–≥–∏—Ö –ø–ª–∞–≥–∏–Ω–æ–≤ certbot.

---

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: 29.10.2025  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞**: 1.0