# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é letsencrypt_regru.sh

**–ê–≤—Ç–æ—Ä:** –§–æ—Ñ–∞–Ω–æ–≤ –î–º–∏—Ç—Ä–∏–π  
**–î–∞—Ç–∞:** 28.10.2025

## –û–ø–∏—Å–∞–Ω–∏–µ

`letsencrypt_regru.sh` - —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –¥–ª—è Let's Encrypt Manager —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π reg.ru –∏ Nginx Proxy Manager.

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç:
- –£—Å—Ç–∞–Ω–æ–≤–∫—É –≤—Å–µ—Ö —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è Python
- –£—Å—Ç–∞–Ω–æ–≤–∫—É Python –±–∏–±–ª–∏–æ—Ç–µ–∫ (requests, cryptography, certbot)
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫—É systemd —Å–µ—Ä–≤–∏—Å–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Linux (Debian/Ubuntu, CentOS/RHEL/Fedora)
- Root –¥–æ—Å—Ç—É–ø (sudo)
- –ú–∏–Ω–∏–º—É–º 512MB RAM
- –ú–∏–Ω–∏–º—É–º 1GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ
- –ò–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

## –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

**–°–ø–æ—Å–æ–± 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

–°–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± - –∑–∞–ø—É—Å—Ç–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É –Ω–∞–ø—Ä—è–º—É—é —Å GitHub:

```bash
sudo bash -c "$(curl -fsSL https://github.com/DFofanov/configure_nginx_manager/raw/refs/heads/master/letsencrypt_regru.sh)"
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∞–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–æ—á–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
- –ó–∞–ø—É—Å—Ç–∏—Ç –µ–≥–æ —Å –ø—Ä–∞–≤–∞–º–∏ root
- –ü—Ä–æ–≤–µ–¥–µ—Ç —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É

**–°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏–∑—É—á–∏—Ç—å –∫–æ–¥ –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π:

```bash
# 1. –°–∫–∞—á–∞–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/DFofanov/configure_nginx_manager.git
cd configure_nginx_manager

# 2. –î–∞–π—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
chmod +x letsencrypt_regru.sh

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É
sudo ./letsencrypt_regru.sh
```

## –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

–í–æ –≤—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–∫—Ä–∏–ø—Ç —Å–ø—Ä–æ—Å–∏—Ç:

1. **–î–æ–º–µ–Ω** - –≤–∞—à –æ—Å–Ω–æ–≤–Ω–æ–π –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, `example.com`)
2. **Email** - –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π Let's Encrypt
3. **–£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ reg.ru:**
   - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ü–∞—Ä–æ–ª—å
4. **Wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç** - —Å–æ–∑–¥–∞–≤–∞—Ç—å –ª–∏ `*.example.com` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: –î–∞)
5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å NPM** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
   - –ê–¥—Ä–µ—Å NPM (–Ω–∞–ø—Ä–∏–º–µ—Ä, `http://10.10.10.14:81`)
   - Email –¥–ª—è –≤—Ö–æ–¥–∞ –≤ NPM
   - –ü–∞—Ä–æ–ª—å NPM

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```
/opt/letsencrypt-regru/           # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ letsencrypt_regru_api.py      # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç
‚îú‚îÄ‚îÄ venv/                         # –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ Python
‚îî‚îÄ‚îÄ docs/                         # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

/etc/letsencrypt-regru/           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ config.json                   # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (credentials, –¥–æ–º–µ–Ω, NPM)

/var/log/letsencrypt-regru/       # –õ–æ–≥–∏
‚îî‚îÄ‚îÄ letsencrypt_regru.log

/etc/letsencrypt/live/            # –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã Let's Encrypt
‚îî‚îÄ‚îÄ example.com/
    ‚îú‚îÄ‚îÄ privkey.pem
    ‚îú‚îÄ‚îÄ cert.pem
    ‚îú‚îÄ‚îÄ chain.pem
    ‚îî‚îÄ‚îÄ fullchain.pem

/etc/systemd/system/              # Systemd —Å–µ—Ä–≤–∏—Å—ã
‚îú‚îÄ‚îÄ letsencrypt-regru.service     # –°–µ—Ä–≤–∏—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
‚îî‚îÄ‚îÄ letsencrypt-regru.timer       # –¢–∞–π–º–µ—Ä (–∫–∞–∂–¥—ã–µ 12 —á–∞—Å–æ–≤)

/usr/local/bin/
‚îî‚îÄ‚îÄ letsencrypt-regru             # –ì–ª–æ–±–∞–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã letsencrypt-regru

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–∞ —É–¥–æ–±–Ω–∞—è –≥–ª–æ–±–∞–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º —Ñ—É–Ω–∫—Ü–∏–π:

### üîß –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
letsencrypt-regru --check

# –ü–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç Let's Encrypt
letsencrypt-regru --obtain

# –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
letsencrypt-regru --renew

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
letsencrypt-regru --auto

# –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
letsencrypt-regru --test-cert
```

### üß™ –ö–æ–º–∞–Ω–¥—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ API reg.ru
# - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π IP
# - –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ API
# - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –±–∞–ª–∞–Ω—Å –∞–∫–∫–∞—É–Ω—Ç–∞
letsencrypt-regru --test-api

# –¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ DNS –∑–∞–ø–∏—Å–∏ TXT
# - –ü–æ–ª–Ω–∞—è —Å–∏–º—É–ª—è—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
# - –°–æ–∑–¥–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—É—é TXT –∑–∞–ø–∏—Å—å _acme-challenge
# - –û–∂–∏–¥–∞–µ—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è DNS (60 —Å–µ–∫—É–Ω–¥)
# - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á–µ—Ä–µ–∑ –ø—É–±–ª–∏—á–Ω—ã–µ DNS —Å–µ—Ä–≤–µ—Ä—ã
# - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞–ø–∏—Å—å
letsencrypt-regru --test-dns

# –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ –≤—Å–µ–º –∫–æ–º–∞–Ω–¥–∞–º
letsencrypt-regru --help

# –í–∫–ª—é—á–∏—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥ (verbose mode)
letsencrypt-regru --obtain -v
letsencrypt-regru --check -v
```

### ‚öôÔ∏è –°–ª—É–∂–µ–±–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)

```bash
# Certbot authentication hook (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
letsencrypt-regru --auth-hook

# Certbot cleanup hook (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
letsencrypt-regru --cleanup-hook
```

### üìã –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|---------|----------|---------------|
| `--check` | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ | –†–µ–≥—É–ª—è—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ |
| `--obtain` | –ü–æ–ª—É—á–∞–µ—Ç –Ω–æ–≤—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –æ—Ç Let's Encrypt | –ü–µ—Ä–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ |
| `--renew` | –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç | –ü—Ä–æ–¥–ª–µ–Ω–∏–µ —Å—Ä–æ–∫–∞ |
| `--auto` | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ | –î–ª—è cron/systemd |
| `--test-cert` | –°–æ–∑–¥–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç | –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞/—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |
| `--test-api` | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ API reg.ru | –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è |
| `--test-dns` | –¢–µ—Å—Ç–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ DNS –∑–∞–ø–∏—Å–∏ | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ SSL |
| `--auth-hook` | Hook –¥–ª—è certbot (—Å–æ–∑–¥–∞–Ω–∏–µ DNS) | –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ |
| `--cleanup-hook` | Hook –¥–ª—è certbot (—É–¥–∞–ª–µ–Ω–∏–µ DNS) | –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ |
| `--help` | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø—Ä–∞–≤–∫—É | –ü–æ–º–æ—â—å |
| `-v` | –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥ | –û—Ç–ª–∞–¥–∫–∞ |

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–£—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç systemd timer –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Ç–∞–π–º–µ—Ä–∞
systemctl status letsencrypt-regru.timer

# –ö–æ–≥–¥–∞ —Å–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—É—Å–∫
systemctl list-timers letsencrypt-regru.timer

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∑–∞–ø—É—Å–∫–æ–≤
journalctl -u letsencrypt-regru

# –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
journalctl -u letsencrypt-regru -f
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞–π–º–µ—Ä–∞

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:
- –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫: —á–µ—Ä–µ–∑ 15 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º—ã
- –ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å: –∫–∞–∂–¥—ã–µ 12 —á–∞—Å–æ–≤
- –°–ª—É—á–∞–π–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞: –¥–æ 1 —á–∞—Å–∞ (—á—Ç–æ–±—ã –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É)

–ò–∑–º–µ–Ω–∏—Ç—å –º–æ–∂–Ω–æ –≤ `/etc/systemd/system/letsencrypt-regru.timer`.

## –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
sudo nano /etc/letsencrypt-regru/config.json

# –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–∞–π–º–µ—Ä
sudo systemctl restart letsencrypt-regru.timer
```

### –ü—Ä–∏–º–µ—Ä config.json

```json
{
    "regru_username": "your_username",
    "regru_password": "your_password",
    "domain": "example.com",
    "wildcard": true,
    "email": "admin@example.com",
    "cert_dir": "/etc/letsencrypt/live",
    "log_file": "/var/log/letsencrypt-regru/letsencrypt_regru.log",
    "dns_propagation_wait": 60,
    "dns_check_attempts": 10,
    "dns_check_interval": 10,
    "renewal_days": 30,
    "npm_enabled": true,
    "npm_host": "http://10.10.10.14:81",
    "npm_email": "admin@npm.local",
    "npm_password": "secure_password"
}
```

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –°–∫–∞—á–∞–π—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é
cd configure_nginx_manager
git pull

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
sudo ./letsencrypt_regru.sh update
```

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ:
- –û—Å—Ç–∞–Ω–æ–≤–∏—Ç —Ç–∞–π–º–µ—Ä
- –û–±–Ω–æ–≤–∏—Ç —Å–∫—Ä–∏–ø—Ç
- –û–±–Ω–æ–≤–∏—Ç Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç —Ç–∞–π–º–µ—Ä

## –£–¥–∞–ª–µ–Ω–∏–µ

```bash
# –ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
sudo ./letsencrypt_regru.sh uninstall
```

–°–∫—Ä–∏–ø—Ç —É–¥–∞–ª–∏—Ç:
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑ `/opt/letsencrypt-regru/`
- Systemd —Å–µ—Ä–≤–∏—Å—ã
- –ì–ª–æ–±–∞–ª—å–Ω—É—é –∫–æ–º–∞–Ω–¥—É

–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤ `/etc/letsencrypt/live/` —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è!

–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å:
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é `/etc/letsencrypt-regru/`
- –õ–æ–≥–∏ `/var/log/letsencrypt-regru/`

## –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –õ–æ–≥–∏ systemd (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
journalctl -u letsencrypt-regru -f

# –§–∞–π–ª –ª–æ–≥–∞
tail -f /var/log/letsencrypt-regru/letsencrypt_regru.log

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
tail -n 100 /var/log/letsencrypt-regru/letsencrypt_regru.log
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∫–æ–º–∞–Ω–¥—ã
which letsencrypt-regru

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Python –æ–∫—Ä—É–∂–µ–Ω–∏–µ
ls -la /opt/letsencrypt-regru/venv/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å systemd —Å–µ—Ä–≤–∏—Å—ã
systemctl list-unit-files | grep letsencrypt-regru
```

### –û—à–∏–±–∫–∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ

**–û—à–∏–±–∫–∞: "Permission denied"**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å sudo
sudo ./letsencrypt_regru.sh
```

**–û—à–∏–±–∫–∞: "Package not found"**
```bash
# –û–±–Ω–æ–≤–∏—Ç–µ —Å–ø–∏—Å–∫–∏ –ø–∞–∫–µ—Ç–æ–≤
sudo apt-get update  # Debian/Ubuntu
sudo yum update      # CentOS/RHEL
```

**–û—à–∏–±–∫–∞: "Python module not found"**
```bash
# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
sudo rm -rf /opt/letsencrypt-regru/venv
sudo ./letsencrypt_regru.sh
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏

**–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
tail -n 50 /var/log/letsencrypt-regru/letsencrypt_regru.log

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cat /etc/letsencrypt-regru/config.json

# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—Ä—É—á–Ω—É—é
letsencrypt-regru --obtain -v
```

**DNS –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è**
```bash
# –£–≤–µ–ª–∏—á—å—Ç–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –≤ config.json
"dns_propagation_wait": 120,
"dns_check_attempts": 20
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å NPM

**–ù–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ NPM**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å NPM
curl http://192.168.10.14:81

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ config.json
# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—Ä—É—á–Ω—É—é
letsencrypt-regru --test-cert -v
```

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –û–°

‚úÖ Debian 10, 11, 12  
‚úÖ Ubuntu 20.04, 22.04, 24.04  
‚úÖ CentOS 7, 8  
‚úÖ RHEL 7, 8, 9  
‚úÖ Fedora 35+  

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –¢–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ –ª–∏–º–∏—Ç–æ–≤ Let's Encrypt:

```bash
letsencrypt-regru --test-cert
```

–°–æ–∑–¥–∞—Å—Ç —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–∞ 90 –¥–Ω–µ–π.

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å –≤—Ä—É—á–Ω—É—é
sudo systemctl start letsencrypt-regru.service

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç—É—Å
systemctl status letsencrypt-regru.service
```

### –ò–∑–º–µ–Ω–∏—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `/etc/systemd/system/letsencrypt-regru.timer`:

```ini
[Timer]
# –ö–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤ –≤–º–µ—Å—Ç–æ 12
OnUnitActiveSec=6h
```

–ó–∞—Ç–µ–º:
```bash
sudo systemctl daemon-reload
sudo systemctl restart letsencrypt-regru.timer
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å –ø–∞—Ä–æ–ª—è–º–∏ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ `600` (—Ç–æ–ª—å–∫–æ root)
- –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –∏–º–µ—é—Ç –ø—Ä–∞–≤–∞ `600`
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –æ—Ç root
- –õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ root

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- GitHub Issues: https://github.com/YOUR_USERNAME/configure_nginx_manager/issues
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `/opt/letsencrypt-regru/docs/`
- Email: admin@dfv24.com

---

**–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ:** –§–æ—Ñ–∞–Ω–æ–≤ –î–º–∏—Ç—Ä–∏–π  
**–î–∞—Ç–∞:** 28.10.2025  
**–í–µ—Ä—Å–∏—è:** 2.0
